<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Game Turn Timer</title>
    
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    
    <script src="https://unpkg.com/vue"></script>

    <!-- <link rel="icon" type="image/png" href="/favicon@16px.png" sizes="16x16">  
    <link rel="icon" type="image/png" href="/favicon@32px.png" sizes="32x32">  
    <link rel="icon" type="image/png" href="/favicon@96px.png" sizes="96x96"> -->  
</head>
<body>
<div class="container" id="app">
    

    <turn-clock :seconds="turnSeconds"></turn-clock>

    <section class="buttons">
        <button @click="reset" class="button button--reset">Reset</button>
        <button @click="playOrPause" class="button button--playpause">{{playOrPauseLabel}}</button>
    </section>
            
</div>

<script>

Vue.component('turn-clock', {
    template: '<section class="turn-clock"><div class="labels"><div class="label">H</div><div class="label">M</div><div class="label">S</div></div><div class="numbers"><div class="number number--hours">{{clockHours}}</div><div class="sep">:</div><div class="number number--minutes">{{clockMinutes}}</div><div class="sep">:</div><div class="number number--seconds">{{clockSeconds}}</div></div></section>',
    props : ['seconds'],
    computed: {
        clockHours : function() {
            var h = Math.floor(this.seconds / 3600);
            return (h > 9) ? h : '0'+h;
        },
        clockMinutes : function() {
            var m = Math.floor((this.seconds / 60) % 60);
            return (m > 9) ? m : '0'+m;
        },
        clockSeconds : function() {
            var s = this.seconds % 60;
            return (s > 9) ? s : '0'+s;
        }
    }


});

var app = new Vue({
    el: '#app',
    data: {
        totalSeconds : 120,
        turnSeconds : 10,
        timer : null,
        state : 'pause'
    },
    methods : {
        tick : function(){
            this.turnSeconds --;
            if (this.turnSeconds === 0) {
                clearInterval(this.timer);
                this.announceTurnOver();
            }
        },
        reset : function(){
            this.turnSeconds = this.totalSeconds;
        },
        playOrPause : function() {
            console.log('state',this.state);

            if (this.state == 'pause') {
                this.play();
            } else if (this.state == 'play') {
                this.pause();
            }
            console.log('state',this.state);
        },
        play : function(){
            this.timer = setInterval(this.tick, 1000);
            this.$data.state = 'play';
        },
        pause : function(){
            clearInterval(this.timer);
            this.$data.state = 'pause';
        },
        announceTurnOver : function() {
            console.log('TURN OVER!');
        }
    },
    computed : {
        playOrPauseLabel : function() {
            return (this.state == 'pause') ? 'Play' : 'Pause'; 
        }
    },
    mounted : function() {
    },
});

</script>

</body>
</html>